{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useRef, useEffect } from \"react\";\nimport * as d3 from \"d3\";\n\nconst useCreateHistogram = (dimensions, data) => {\n  _s();\n\n  const refHisto = useRef(null);\n  useEffect(() => {\n    // set the dimensions and margins of the graph\n    const {\n      width,\n      height,\n      margin = {}\n    } = dimensions;\n    const svgWidth = width + margin.left + margin.right;\n    const svgHeight = height + margin.top + margin.bottom; // append the svg object to the body of the page\n\n    d3.select(refHisto.current).selectAll(\"*\").remove();\n    const svg = d3.select(refHisto.current).attr(\"width\", svgWidth).attr(\"height\", svgHeight).append(\"g\").attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\"); // X axis: scale and draw:\n\n    const x = d3.scaleLinear().domain([0, 10]) // can use this instead of 1000 to have the max of data: d3.max(data, function(d) { return +d.price })\n    .range([0, width]);\n    svg.append(\"g\").attr(\"transform\", \"translate(0,\" + height + \")\").call(d3.axisBottom(x)); // set the parameters for the histogram\n\n    const histogram = d3.bin().value(function (d) {\n      return d;\n    }) // I need to give the vector of value\n    .domain(x.domain()) // then the domain of the graphic\n    .thresholds(x.ticks(30)); // then the numbers of bins\n    // And apply this function to data to get the bins\n\n    const bins = histogram(data); // Y axis: scale and draw:\n\n    const y = d3.scaleLinear().range([height, 0]);\n    y.domain([0, d3.max(bins, function (d) {\n      return d.length;\n    })]); // d3.hist has to be called before the Y axis obviously\n\n    svg.append(\"g\").call(d3.axisLeft(y)); // append the bar rectangles to the svg element\n\n    svg.selectAll(\"rect\").data(bins).enter().append(\"rect\").attr(\"x\", 1).attr(\"transform\", function (d) {\n      return \"translate(\" + x(d.x0) + \",\" + y(d.length) + \")\";\n    }).attr(\"width\", function (d) {\n      return x(d.x1) - x(d.x0) - 1;\n    }).attr(\"height\", function (d) {\n      return height - y(d.length);\n    }).style(\"fill\", \"#69b3a2\");\n  }, [dimensions, data]);\n  return refHisto;\n};\n\n_s(useCreateHistogram, \"2ikW+TcOn7RYeszt1UdU11dQ0yQ=\");\n\nexport default useCreateHistogram;","map":{"version":3,"names":["useRef","useEffect","d3","useCreateHistogram","dimensions","data","refHisto","width","height","margin","svgWidth","left","right","svgHeight","top","bottom","select","current","selectAll","remove","svg","attr","append","x","scaleLinear","domain","range","call","axisBottom","histogram","bin","value","d","thresholds","ticks","bins","y","max","length","axisLeft","enter","x0","x1","style"],"sources":["/home/nicki/curso_fullstack/interview/FE/my-app/src/hooks/useCreateHistogram.js"],"sourcesContent":["import { useRef, useEffect } from \"react\";\nimport * as d3 from \"d3\";\nconst useCreateHistogram = (dimensions, data) => {\n  const refHisto = useRef(null);\n  useEffect(() => {\n    // set the dimensions and margins of the graph\n    const { width, height, margin = {} } = dimensions;\n    const svgWidth = width + margin.left + margin.right;\n    const svgHeight = height + margin.top + margin.bottom;\n\n    // append the svg object to the body of the page\n    d3.select(refHisto.current).selectAll(\"*\").remove();\n    const svg = d3\n      .select(refHisto.current)\n      .attr(\"width\", svgWidth)\n      .attr(\"height\", svgHeight)\n      .append(\"g\")\n      .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n\n    // X axis: scale and draw:\n    const x = d3\n      .scaleLinear()\n      .domain([0, 10]) // can use this instead of 1000 to have the max of data: d3.max(data, function(d) { return +d.price })\n      .range([0, width]);\n    svg\n      .append(\"g\")\n      .attr(\"transform\", \"translate(0,\" + height + \")\")\n      .call(d3.axisBottom(x));\n\n    // set the parameters for the histogram\n    const histogram = d3\n      .bin()\n      .value(function (d) {\n        return d;\n      }) // I need to give the vector of value\n      .domain(x.domain()) // then the domain of the graphic\n      .thresholds(x.ticks(30)); // then the numbers of bins\n\n    // And apply this function to data to get the bins\n    const bins = histogram(data);\n\n    // Y axis: scale and draw:\n    const y = d3.scaleLinear().range([height, 0]);\n    y.domain([\n      0,\n      d3.max(bins, function (d) {\n        return d.length;\n      }),\n    ]); // d3.hist has to be called before the Y axis obviously\n    svg.append(\"g\").call(d3.axisLeft(y));\n\n    // append the bar rectangles to the svg element\n    svg\n      .selectAll(\"rect\")\n      .data(bins)\n      .enter()\n      .append(\"rect\")\n      .attr(\"x\", 1)\n      .attr(\"transform\", function (d) {\n        return \"translate(\" + x(d.x0) + \",\" + y(d.length) + \")\";\n      })\n      .attr(\"width\", function (d) {\n        return x(d.x1) - x(d.x0) - 1;\n      })\n      .attr(\"height\", function (d) {\n        return height - y(d.length);\n      })\n      .style(\"fill\", \"#69b3a2\");\n  }, [dimensions, data]);\n  return refHisto;\n};\nexport default useCreateHistogram;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}